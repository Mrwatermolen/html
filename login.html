<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
  $(document).ready(function(){
    $("#login_button").click(function(){
      var $user_name=$("#UserName").val();
      var $password=$("#Password").val();
      if($user_name.length != 0 && $password.length !=0)
      {
        /*$.ajax({
          url:"testpost.py",
          type:"POST",
          dataType:"json",
          success:function (date) {
            console.log(data)
          }
        })*/

        $.ajax(
          {
            url:"testpost.py",
            type:"POST",
            UserName:$user_name,
            Password:$password,
            dataType:"JOSN",
            async: true,
            success:function (date) {
              if(date.succ) {
                var search_url =encodeURI("index.html?&"+date.name)
                window.location.href = search_url;
              }
              else
                $("#ErrorMessage").text("Something is wrong!");

            }
          }
        )
      }
      else {
        alert("Name or Password cann't be empty!")
      }
    });

    $("#LookPassword").click(function () {
      var $judge = $("#Password").attr("type");
      if($judge == "text")
        $("#Password").attr("type","password");
      else
        $("#Password").attr("type","text");
    })
  });

</script>
<body>
<h1>Login in</h1>
<table>
  <tr>
    <td>UserNmae:</td>
    <td><input type="text" id="UserName"  placeholder="Write your name"/></td>
  </tr>
  <tr>
    <td>Password</td>
    <td><input type="password" id="Password"/><button id="LookPassword"></button></td>
  </tr>
</table>
<button id="login_button">Login in<p id="ErrorMessage"></p></button>
<div id="myDiv">

</div>
</body>
</html>
